{"version":3,"sources":["maps_legend_builder/maps_legend_builder.js"],"names":["globalGap","globalFont","globalTextColor","globalCaptionFont","globalCaptionColor","globalBorder","module","exports","setGlobalValues","textfont","textcolor","gap","captionfont","captioncolor","borderstyle","tablesInit","columns","rows","id","body","document","getElementById","j","tbl","createElement","style","border","align","i","tr","insertRow","td","insertCell","appendChild","splitCell","col","row","cols_amount","createInternalTable","createTable","cols","is_split","extrenalcol","externalrow","inside_col","tdID","undefined","getCell","table","r","c","cell","cells","insertCanvas","canv","layeredColoring","column","colors","strokecolor","size","is_vertical","description","txtGap","xgap","ygap","caption","canvasSize","getWH","length","mytable","ctx","getCtx","w","h","x0","y0","x","y","fillStyle","fillRect","strokeStyle","strokeRect","startCoord","dCoord","constCoordDescr","coordDescr","alert","textDrawing","setCaption","drawRings","color","Array","isArray","beginPath","arc","Math","PI","curcolor","fill","closePath","tst","black","getSizeArray","arr","slice","max","apply","setText","textwidth","mycell","getTextWidth","width","currentfont","font","innerHTML","height","getContext","circles","currentsize","maxR","sizeArray","currentcolor","cursize","text","cap","createCaption","drawText","textAlign","textBaseline","fillText","dx","dy","slices","fillcolors","strokecolors","internaltext","internaltextfont","internaltextcolor","tablerow","tablecol","canvL","canvW","xtext","ytext","drawDottedLine","linecolor","pattern","lineWidth","lastX","moveTo","k","lineTo","stroke","drawArrow","arrowwidth","arrowcolor","linesLegend","ctxW","arrH","ctxH","l","arrowY","pointsMethod","diameter","rows_amount","drawPoints","radius","textLegend","descr","descrfont","descrcolor","imagesLegend","links","img","src","amount"],"mappings":"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","file":"maps_legend_builder.b9815ee5.js","sourceRoot":"..","sourcesContent":["var globalGap = 5;\r\nvar globalFont = \"10pt Arial\";\r\nvar globalTextColor = \"black\";\r\nvar globalCaptionFont = \"12pt Arial\";\r\nvar globalCaptionColor = \"black\";\r\nvar globalBorder = \"\"; //'1px solid black'; //\"\"; //\"5px solid rgba(0,0,0,0)\"; //'1px solid black'; //\"\"\r\n\r\nmodule.exports = {\r\n\r\n  setGlobalValues: function(textfont, textcolor, gap, captionfont, captioncolor, borderstyle) {\r\n      globalFont = textfont || globalFont;\r\n      globalTextColor = textcolor || globalTextColor;\r\n      globalGap = gap || globalGap;\r\n      globalCaptionFont = captionfont || globalCaptionFont;\r\n      globalCaptionColor = captioncolor || globalCaptionColor;\r\n      globalBorder = borderstyle || globalBorder;\r\n  },\r\n\r\n  tablesInit: function(columns, rows, id){\r\n      //rows - array of rows number of every table\r\n      var body = document.getElementById(id); //document.body,\r\n\r\n      for (j = 0; j < columns; j++) {\r\n          var tbl  = document.createElement('table');\r\n\r\n          //it is nessesary not to have table for all screen\r\n          tbl.style =\"table-layout:fixed;\"\r\n          tbl.style.border = globalBorder;\r\n          tbl.align = \"left\";\r\n\r\n          for(var i = 0; i < rows[j]; i++) {\r\n              var tr = tbl.insertRow();\r\n              var td = tr.insertCell();\r\n              td.id = \"td\" + j + i;\r\n              td.style.border = globalBorder;\r\n          }\r\n          body.appendChild(tbl);\r\n      }\r\n  },\r\n\r\n  splitCell: function(col, row, cols_amount) {\r\n      //always 1 row\r\n      cols_amount = cols_amount || 2;\r\n      createInternalTable(col, row, 1, cols_amount, true);\r\n  },\r\n\r\n  createTable: function(id, rows, cols, is_split, align) {\r\n      var body = document.getElementById(id);\r\n      var tbl  = document.createElement('table');\r\n\r\n      //it is nessesary not to have table for all screen\r\n      tbl.style=\"table-layout:fixed;\"\r\n      tbl.style.border = globalBorder;\r\n      var cols = cols || 2;\r\n      for (j = 0; j < rows; j++) {\r\n          var tr = tbl.insertRow();\r\n          for(var i = 0; i < cols; i++) {\r\n              var td = tr.insertCell();\r\n              if (is_split) {\r\n                  td.id = id + i;\r\n                  td.style = \"vertical-align: top;\"; //to have table in top of the cell\r\n              } else {\r\n                  td.style = \"vertical-align: center;\"; //to have text in cell in center\r\n                  if (align) {\r\n                      td.align = align;\r\n                  }\r\n              }\r\n              td.style.border = globalBorder;\r\n          }\r\n      }\r\n      body.appendChild(tbl);\r\n      return tbl;\r\n  },\r\n\r\n  createInternalTable: function(extrenalcol, externalrow, rows, cols, is_split, inside_col, align) {\r\n      var tdID = \"td\" + extrenalcol + externalrow;\r\n      if ((inside_col != undefined) && (inside_col !== false)) {\r\n          tdID = tdID + inside_col;\r\n      }\r\n      var tbl = createTable(tdID, rows, cols, is_split, align); //tableCreate(cols, rows, tdID);\r\n      return tbl;\r\n  },\r\n\r\n  getCell: function(table, r, c) {\r\n      var cell = table.rows[r].cells;\r\n      return cell[c];\r\n   },\r\n\r\n  insertCanvas: function(td) {\r\n      var canv = document.createElement('canvas');\r\n      td.appendChild(canv);\r\n      return canv;\r\n  },\r\n\r\n  //rectangles (изолинейная шкала)\r\n  layeredColoring: function(column, row, colors, strokecolor, size, is_vertical, description, textfont, textcolor, txtGap, xgap, ygap, caption, captionfont, captioncolor, inside_col) {\r\n\r\n      xgap = xgap || globalGap;\r\n      ygap = ygap || globalGap;\r\n      canvasSize = getWH(colors.length, size, is_vertical);\r\n      var mytable = createInternalTable(column, row, 1, 1, false, inside_col);\r\n      var ctx = getCtx(mytable, 0, 0, canvasSize.w + xgap*2, canvasSize.h + ygap*2);\r\n\r\n      var x0 = xgap;\r\n      var y0 = ygap;\r\n      var x = x0;\r\n      var y = y0;\r\n      var w = size[0];\r\n      var h = size[1];\r\n\r\n      // rectangles drawing\r\n      for (i = 0; i < colors.length; i++) {\r\n          ctx.fillStyle = colors[i];\r\n          ctx.fillRect(x, y, w, h);\r\n          ctx.strokeStyle = strokecolor || \"grey\";\r\n          ctx.strokeRect(x, y, w, h);\r\n          if (!is_vertical) {\r\n              x = x + w;\r\n          }\r\n          else {\r\n              y = y + h;\r\n          }\r\n      }\r\n\r\n      //text drawing\r\n      var startCoord, dCoord, constCoordDescr, coordDescr;\r\n      if (is_vertical) {\r\n          startCoord = y0;\r\n          dCoord = h;\r\n          txtGap = txtGap || w + w*0.1\r\n          constCoordDescr = x0 + txtGap;\r\n      }\r\n      else {\r\n          startCoord = x0;\r\n          dCoord = w;\r\n          txtGap = txtGap || h + h*0.7\r\n          constCoordDescr = y0 + txtGap;\r\n      }\r\n\r\n      //start coordinate\r\n      switch(description.length) {\r\n          case colors.length - 1:\r\n              coordDescr = startCoord + dCoord;\r\n              break;\r\n          case colors.length + 1:\r\n              coordDescr = startCoord;\r\n              break;\r\n          case colors.length:\r\n              coordDescr = startCoord + dCoord/2.0;\r\n              break;\r\n          default:\r\n              alert('Incorrect');\r\n      }\r\n\r\n      if (is_vertical) {\r\n          textDrawing(ctx, constCoordDescr, coordDescr, 0, dCoord, \"start\", description, textfont, textcolor);\r\n      }\r\n      else {\r\n          textDrawing(ctx, coordDescr, constCoordDescr, dCoord, 0, \"center\", description, textfont, textcolor);\r\n      }\r\n\r\n      setCaption(mytable, captionfont, captioncolor, caption);\r\n  },\r\n\r\n  drawRings: function(ctx, x, y, size, color) {\r\n      if (Array.isArray(size)) {\r\n          for (j = 0; j < size.length; j++) {\r\n              ctx.beginPath();\r\n              ctx.arc(x, y, size[j], 0, Math.PI*2);\r\n              var curcolor = (Array.isArray(color)? color[j] : color || \"black\")\r\n              ctx.fillStyle = curcolor;\r\n              ctx.fill();\r\n              ctx.closePath();\r\n          }\r\n      }\r\n      else {\r\n          ctx.beginPath();\r\n          ctx.arc(x, y, size, 0, Math.PI*2);\r\n          var tst = color[j] || color || black;\r\n          ctx.fillStyle = (Array.isArray(color)? color[j] : color || \"black\");\r\n          ctx.fill();\r\n          ctx.closePath();\r\n      }\r\n  },\r\n\r\n  getSizeArray: function(size) {\r\n      var arr = size.slice();\r\n      for (i = 0; i < arr.length; i++) {\r\n          if (arr[i].length != undefined) {\r\n              arr[i] = Math.max.apply(null, arr[i]);\r\n          }\r\n      }\r\n      return arr;\r\n  },\r\n\r\n  setText: function(mytable, r, c, description, textfont, textcolor, textwidth) {\r\n      var mycell = getCell(mytable, r, c);\r\n      if (textwidth != undefined) {\r\n          var w = getTextWidth(description);\r\n          mycell.width = textwidth || w || \"100px\";\r\n      }\r\n      var currentfont = Array.isArray(textfont) ? textfont[i] : textfont;\r\n      mycell.style.font = currentfont || globalFont;\r\n      mycell.style.color = textcolor || globalTextColor;\r\n      mycell.innerHTML = description;\r\n  },\r\n\r\n  getCtx: function(mytable, i, column, w, h) {\r\n      var mycell = getCell(mytable, i, column);\r\n      var canv = insertCanvas (mycell);\r\n      canv.width = w;\r\n      canv.height = h;\r\n      var ctx = canv.getContext('2d');\r\n      return ctx;\r\n  },\r\n\r\n  //значки и картодиаграммы\r\n  circles: function(column, row, size, is_vertical, color, description, textfont, textcolor, textwidth, caption, captionfont, captioncolor, inside_col) {\r\n      //column & row - coordinates of cell of external table, where will be our circles\r\n      //inside_col is a column number of internal table in the external table\r\n      //create internal table with description.length rows\r\n      // if there is only one color - set it in one array: \"yellow\"\r\n      // if there only one size with difficult structure: [[...]]\r\n      if (is_vertical) {\r\n          var mytable = createInternalTable(column, row, description.length, 2, false, inside_col);\r\n      } else {\r\n          var mytable = createInternalTable(column, row, 2, description.length, false, inside_col, \"center\");\r\n      }\r\n\r\n      var currentsize;\r\n      var maxR;\r\n      if (Array.isArray(size)) {\r\n          var sizeArray = getSizeArray(size);\r\n          maxR = Math.max.apply(null, sizeArray);\r\n          if ((size.length == 1) && (Array.isArray(size[0]))) {\r\n              currentsize = size[0];\r\n          }\r\n      } else {\r\n          currentsize = size;\r\n          maxR = size;\r\n      }\r\n\r\n      //coordinate of circles center\r\n      var x0 = maxR + globalGap;\r\n\r\n      //if there is a only one color for all\r\n      var currentcolor;\r\n      if (Array.isArray(color)) {\r\n          if (color.length == 1) {\r\n              currentcolor = color[0];\r\n          }\r\n      } else {\r\n          currentcolor = color;\r\n      }\r\n\r\n      if (Array.isArray(description)) {\r\n          for (i = 0; i < description.length; i++) {\r\n              if (is_vertical) {\r\n                  var ctx = getCtx(mytable, i, 0, x0*2, x0*2);\r\n                  setText(mytable, i, 1, description[i], textfont, textcolor, textwidth);\r\n              } else {\r\n                  var ctx = getCtx(mytable, 0, i, x0*2, x0*2);\r\n                  setText(mytable, 1, i, description[i], textfont, textcolor, textwidth);\r\n              }\r\n\r\n              ctx.beginPath();\r\n              if (currentcolor) {\r\n                  color[i] = currentcolor;\r\n              }\r\n              var curcolor = currentcolor ? currentcolor : color[i];\r\n              var cursize = currentsize || size[i];\r\n              drawRings(ctx, x0, x0, cursize, curcolor);\r\n              ctx.closePath();\r\n          }\r\n      }\r\n      else {\r\n          var ctx = getCtx(mytable, 0, 0, x0*2, x0*2);\r\n          drawRings(ctx, x0, x0, size, currentcolor);\r\n          setText(mytable, 0, 1, description, textfont, textcolor, textwidth);\r\n      }\r\n      setCaption(mytable, captionfont, captioncolor, caption);\r\n  },\r\n\r\n  setCaption: function(mytable, font, color, text) {\r\n      if (text) {\r\n          var cap = mytable.createCaption();\r\n          cap.style.font = font || globalCaptionFont || globalFont;\r\n          cap.style.color = color || globalCaptionColor || globalTextColor;\r\n          cap.innerHTML = text;\r\n      }\r\n  },\r\n\r\n  drawText: function(ctx, x, y, align, description, currentfont, textcolor) {\r\n      ctx.fillStyle = textcolor || globalTextColor;\r\n      ctx.font = currentfont || globalFont;\r\n      ctx.textAlign = align;\r\n      ctx.textBaseline = \"middle\";\r\n      ctx.fillText(description, x, y);\r\n  },\r\n\r\n  textDrawing: function(ctx, x, y, dx, dy, align, description, textfont, textcolor) {\r\n      for (i = 0; i < description.length; i ++) {\r\n          var currentfont = Array.isArray(textfont) ? textfont[i] : textfont;\r\n          drawText(ctx, x, y, align, description[i], currentfont, textcolor);\r\n          x = x + dx;\r\n          y = y + dy;\r\n      }\r\n  },\r\n\r\n  slices: function(col, row, size, fillcolors, strokecolors, is_vertical, description, textfont, textcolor, internaltext, internaltextfont, internaltextcolor, textwidth, caption, captionfont, captioncolor, inside_col) {\r\n      //size[0] - length - w, size[1] - h\r\n\r\n      var tablerow = is_vertical? description.length : 2;\r\n      var tablecol = is_vertical? 2 : description.length;\r\n      if (is_vertical) {\r\n          var mytable = createInternalTable(col, row, tablerow, tablecol, false, inside_col);\r\n      } else {\r\n          var mytable = createInternalTable(col, row, tablerow, tablecol, false, inside_col, \"center\");\r\n      }\r\n\r\n      var w = size[0];\r\n      var h = size[1];\r\n\r\n      var x = globalGap;\r\n\r\n      canvL = w + globalGap;\r\n      canvW = h + globalGap;\r\n\r\n      // rectangles drawing\r\n      for (i = 0; i < fillcolors.length; i++) {\r\n          var ctx;\r\n          if (is_vertical) {\r\n              ctx = getCtx(mytable, i, 0, canvL, canvW);\r\n          } else {\r\n              ctx = getCtx(mytable, 0, i, canvL, canvW);\r\n          }\r\n\r\n          ctx.fillStyle = fillcolors[i];\r\n          ctx.fillRect(x, x, w, h);\r\n          ctx.strokeStyle = strokecolors;\r\n          ctx.strokeRect(x, x, w, h);\r\n\r\n          //text inside the rectangle\r\n          if (internaltext != undefined) {\r\n              if (internaltext[i] != undefined) {\r\n                  xtext = x + (w/2.0);\r\n                  ytext = x + (h/2.0);\r\n                  drawText(ctx, xtext, ytext, \"center\", internaltext[i], internaltextfont, internaltextcolor);\r\n              }\r\n          }\r\n\r\n          if (is_vertical) {\r\n              setText(mytable, i, 1, description[i], textfont, textcolor, textwidth);\r\n          } else {\r\n              setText(mytable, 1, i, description[i], textfont, textcolor, textwidth);\r\n          }\r\n      }\r\n\r\n      setCaption(mytable, captionfont, captioncolor, caption);\r\n  },\r\n\r\n  drawDottedLine: function(ctx, length, x, y, width, linecolor, pattern) {\r\n      if (pattern.length != undefined) {\r\n          ctx.beginPath();\r\n          ctx.lineWidth = width;\r\n          ctx.strokeStyle = linecolor;\r\n          var lastX = x + length;\r\n          ctx.moveTo(x, y);\r\n          while (x < lastX) {\r\n              for (k = 0; k < pattern.length; k+=2) {\r\n                  x = x + pattern[k];\r\n                  if (x > lastX) {\r\n                      x = lastX;\r\n                      ctx.lineTo(x, y);\r\n                      break;\r\n                  }\r\n                  ctx.lineTo(x, y);\r\n                  x = x + pattern[k+1];\r\n                  ctx.moveTo(x, y);\r\n              }\r\n          };\r\n          ctx.stroke();\r\n      }\r\n  },\r\n\r\n  drawArrow: function(ctx, x, y, arrowwidth, arrowcolor) {\r\n      ctx.beginPath();\r\n      ctx.fillStyle = arrowcolor;\r\n      ctx.moveTo(x, y + arrowwidth/2.0);\r\n      ctx.lineTo(x, y - arrowwidth/2.0);\r\n      x = x + arrowwidth;\r\n      ctx.lineTo(x, y);\r\n      ctx.fill();\r\n  },\r\n\r\n  linesLegend: function(col, row, length, width, colors, pattern, description, arrowwidth, textfont, textcolor, textwidth, caption, captionfont, captioncolor, inside_col) {\r\n      // width, colors, pattern - can be array of array: [5, [4,3,2], 1]\r\n      // pattern can be false\r\n      // arrowwidth - array\r\n      var mytable = createInternalTable(col, row, description.length, 2, false, inside_col);\r\n\r\n      //if one color for all lines\r\n      if ((!Array.isArray(colors) && (Array.isArray(description))) || (Array.isArray(colors) && (colors.length != description.length))) {\r\n          colors = new Array(description.length).fill(colors);\r\n      }\r\n\r\n      //if one width for all lines\r\n      if ((!Array.isArray(width) && (Array.isArray(description))) || (Array.isArray(width) && (width.length != description.length))) {\r\n          width = new Array(description.length).fill(width);\r\n      }\r\n\r\n      //if one arrowwidth for all lines\r\n      if ((!Array.isArray(arrowwidth) && (Array.isArray(description))) || (Array.isArray(arrowwidth) && (arrowwidth.length != description.length))) {\r\n          arrowwidth = new Array(description.length).fill(arrowwidth);\r\n      }\r\n\r\n      arrowwidth = arrowwidth || false;\r\n\r\n      var x0 = globalGap;\r\n      var y0 = globalGap + 2;\r\n      var x = x0;\r\n      var y = y0;\r\n      var ctxW = length + globalGap * 2;\r\n      var arrH = getSizeArray(width);\r\n      var ctxH = Math.max.apply(null, arrH) + globalGap * 2;\r\n      for (i = 0; i < description.length; i++) { //array amount\r\n          ctx = getCtx(mytable, i, 0, ctxW, ctxH);\r\n          var l = length;\r\n          x = x0;\r\n          if (arrowwidth) { //not false not undefined\r\n              if (arrowwidth[i]) {\r\n                  if (arrowwidth[i] < 0) {\r\n                      x = x0 - arrowwidth[i];\r\n                      l = length + arrowwidth[i]; //arrowwidth < 0 => line will be shorter\r\n                  }\r\n                  else if (arrowwidth[i] > 0) { //arrowwidth > 0 => line will be shorter\r\n                      l = length - arrowwidth[i];\r\n                  }\r\n              }\r\n          }\r\n          if (Array.isArray(width[i])) {\r\n              for (j = 0; j < colors[i].length; j++) { //lines amount inside the line\r\n                  if (pattern[i] && pattern[i][j]) {\r\n                      drawDottedLine(ctx, l, x, y + width[i][0] / 2.0, width[i][j], colors[i][j], pattern[i][j]);\r\n                  } else {\r\n                      ctx.beginPath();\r\n                      ctx.strokeStyle = colors[i][j];\r\n                      ctx.lineWidth = width[i][j];\r\n                      ctx.moveTo(x, y + width[i][0] / 2.0);\r\n                      ctx.lineTo(x + l, y + width[i][0] / 2.0);\r\n                      ctx.stroke()\r\n                  }\r\n              }\r\n          } else {\r\n              if (pattern[i]) {\r\n                  drawDottedLine(ctx, l, x, y + width[i] / 2.0, width[i], colors[i], pattern[i]);\r\n              } else {\r\n                  ctx.beginPath();\r\n                  ctx.strokeStyle = colors[i];\r\n                  ctx.lineWidth = width[i];\r\n                  ctx.moveTo(x, y + width[i] / 2.0);\r\n                  ctx.lineTo(x + l, y + width[i] / 2.0);\r\n                  ctx.stroke();\r\n              }\r\n          }\r\n\r\n          if (arrowwidth) {\r\n              if (arrowwidth[i]) {\r\n                  arrowcolor = Array.isArray(colors[i]) ? colors[i][0] : colors[i];\r\n                  arrowY = Array.isArray(width[i]) ? width[i][0] / 2.0 + y : width[i] / 2.0 + y;\r\n                  w = arrowwidth[i];\r\n                  if (w < 0) {\r\n                      drawArrow(ctx, x, arrowY, w, arrowcolor);\r\n                  }\r\n                  else {\r\n                      drawArrow(ctx, x + l, arrowY, w, arrowcolor);\r\n                  }\r\n              }\r\n          }\r\n          setText(mytable, i, 1, description[i], textfont, textcolor, textwidth);\r\n      }\r\n      setCaption(mytable, captionfont, captioncolor, caption);\r\n  },\r\n\r\n  pointsMethod: function(col, row, is_vertical, diameter, color, description, strokecolor, textfont, textcolor, caption, captionfont, captioncolor, inside_col) {\r\n      //arrays\r\n      //always 3 circless\r\n      var rows_amount = Array.isArray(description)? description.length : 1;\r\n      if (is_vertical) {\r\n          var mytable = createInternalTable(col, row, rows_amount, 2, false, inside_col); //, description.length);\r\n      } else {\r\n          var mytable = createInternalTable(col, row, 1, 2*rows_amount, false, inside_col, \"center\"); //, description.length);\r\n      }\r\n\r\n      if (rows_amount == 1) {\r\n          var gap = globalGap > diameter? globalGap : diameter;\r\n          var w = gap + diameter*3;\r\n          var h = gap + 5*diameter/2.0;\r\n          var ctx = getCtx(mytable, 0, 0, w, h);\r\n          drawPoints(ctx, diameter/2.0, color, description, strokecolor);\r\n          setText(mytable, 0, 1, description, textfont, textcolor);\r\n      } else {\r\n          for (i = 0; i < rows_amount; i++) {\r\n              var gap = globalGap > diameter[i]? globalGap : diameter[i];\r\n              var w = gap + diameter[i]*3;\r\n              var h = gap + 5*diameter[i]/2.0;\r\n              if (is_vertical) {\r\n                  var ctx = getCtx(mytable, i, 0, w, h);\r\n                  setText(mytable, i, 1, description[i], textfont, textcolor);\r\n              } else {\r\n                  var ctx = getCtx(mytable, 0, 2*i, w, h);\r\n                  setText(mytable, 0, 2*i + 1, description[i], textfont, textcolor);\r\n              }\r\n              drawPoints(ctx, diameter[i]/2.0, color[i], strokecolor);\r\n          }\r\n      }\r\n      setCaption(mytable, captionfont, captioncolor, caption);\r\n  },\r\n\r\n  drawPoints: function(ctx, radius, color, strokecolor) {\r\n      var x0 = radius*2;\r\n      var y0 = x0;\r\n      var x = x0;\r\n      var y = y0;\r\n      ctx.strokeStyle = strokecolor || color;\r\n      ctx.fillStyle = color || black;\r\n\r\n      ctx.beginPath(); //first point\r\n      ctx.arc(x, y, radius, 0, Math.PI*2);\r\n      ctx.stroke();\r\n      ctx.fill();\r\n      ctx.closePath();\r\n\r\n      ctx.beginPath(); //second point\r\n      ctx.arc(x + 4*radius, y, radius, 0, Math.PI*2);\r\n      ctx.stroke();\r\n      ctx.fill();\r\n      ctx.closePath();\r\n\r\n      ctx.beginPath(); //thirs point\r\n      ctx.arc(x + 2*radius, y + 3*radius, radius, 0, Math.PI*2);\r\n      ctx.stroke();\r\n      ctx.fill();\r\n      ctx.closePath();\r\n  },\r\n\r\n  textLegend: function(col, row, text, textfont, textcolor, descr, descrfont, descrcolor, caption, captionfont, captioncolor, inside_col) {\r\n      var rows_amount = Array.isArray(descr)? descr.length : 1;\r\n      var mytable = createInternalTable(col, row, rows_amount, 2, false, inside_col); //, description.length);\r\n\r\n      //if one color for all text elements\r\n      if ((!Array.isArray(textcolor) && (Array.isArray(descr))) || (Array.isArray(textcolor) && (textcolor.length != descr.length))) {\r\n          textcolor = new Array(descr.length).fill(textcolor);\r\n      }\r\n\r\n      if (rows_amount == 1) {\r\n          setText(mytable, 0, 0, text, textfont, textcolor);\r\n          setText(mytable, 0, 1, descr, descrfont, descrcolor);\r\n      } else {\r\n          for (i = 0; i < rows_amount; i++) {\r\n              var font = textfont? textfont[i] : false;\r\n              var color = textcolor? textcolor[i] : false;\r\n              setText(mytable, i, 0, text[i], textfont[i], textcolor[i]);\r\n              setText(mytable, i, 1, descr[i], descrfont[i], descrcolor[i]);\r\n          }\r\n      }\r\n      setCaption(mytable, captionfont, captioncolor, caption);\r\n  },\r\n\r\n  imagesLegend: function(col, row, links, descr, descrfont, descrcolor, caption, captionfont, captioncolor, inside_col) {\r\n      var rows_amount = Array.isArray(descr)? descr.length : 1;\r\n      var mytable = createInternalTable(col, row, rows_amount, 2, false, inside_col);\r\n      if (rows_amount == 1) {\r\n          var mycell = getCell(mytable, 0, 0);\r\n          var img = document.createElement(\"img\");\r\n          mycell.appendChild(img);\r\n          img.src = links;\r\n          setText(mytable, 0, 1, descr, descrfont, descrcolor);\r\n      } else {\r\n          for (i = 0; i < rows_amount; i++) {\r\n              var mycell = getCell(mytable, i, 0);\r\n              var img = document.createElement(\"img\");\r\n              mycell.appendChild(img);\r\n              img.src = links[i];\r\n              var font = descrfont? descrfont[i] : false;\r\n              var color = descrcolor? descrcolor[i] : false;\r\n              setText(mytable, i, 1, descr[i], font, color);\r\n          }\r\n      }\r\n      setCaption(mytable, captionfont, captioncolor, caption);\r\n  },\r\n\r\n  getWH: function(amount, size, is_vertical, gap, description) {\r\n      // for layeredColoring\r\n      // size[0] - w, size[1] - h of rectangle\r\n      var w, h;\r\n      var gap = gap || globalGap * 2;\r\n\r\n      if (is_vertical) {\r\n          h = size[1] * amount + gap;\r\n          w = size[0] * 2 + gap;\r\n      }\r\n      else {\r\n          h = size[1] * 2 + gap;\r\n          w = size[0] * amount + gap;\r\n      }\r\n      return {\r\n          w: w,\r\n          h: h\r\n      }\r\n  },\r\n\r\n  getTextWidth: function(description) {\r\n      //check digit in the last string\r\n      var l = 0; //text length\r\n      if (Array.isArray(description)) {\r\n          for (i = 0 ; i < description.length; i++) {\r\n              if (description[i].length > l) {\r\n                  l = description[i].length;\r\n              }\r\n          }\r\n      }\r\n      else {\r\n          l = description.length;\r\n      }\r\n      return l*8;\r\n  }\r\n}\r\n"]}